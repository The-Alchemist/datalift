#load_core_resources
#load("stringtouri/resources")
##
#set( $moduleUri = "$baseUri/stringtouri")
##
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>#i18n('stringtouri.title') - Datalift</title>
	#css_links
	## Temporary link for dev. purposes.
	<link rel="stylesheet" type="text/css" href="http://localhost:1337/static/css/stringtouri-interface.css"/>
	## <link rel="stylesheet" type="text/css" href="${moduleUri}/static/css/stringtouri-interface.css"/>
</head>
<body>
	#banner
	<div class="ui-widget-content" id="workspace">
		<h3 class="ui-widget-header dl-widget-header">
			#i18n('project.label' ${it.title}) &mdash; #i18n('stringtouri.title')
		</h3>

		<noscript>
			<div class="ui-widget-content ui-corner-all ui-state-error">
				<h4>#i18n('warning.label')</h4>
				<p>#i18n('warning.info')</p>
			</div>
		</noscript>

		<form class="launching-form" id="linkage-form" method="post" action="${moduleUri}?project=${it.uri}">
			
			<fieldset class="target-js field-stack ui-widget-content ui-corner-all">
				<legend>#i18n('modified.label')</legend>

				<div class="dataset-js form-stack ui-state-default ui-corner-top" title="#i18n('dataset.help.target')">
					<label for="targetdataset">#i18n('dataset.label')</label>
					<select id="targetdataset" name="targetdataset" tabindex="1">
						<option value="#i18n('field.mandatory')" selected="selected" disabled="disabled"></option>
						#foreach( $source in $sources )
							<option value="$source">$source</option>
						#end
					</select>
					<p class="info"><span class="ui-icon ui-icon-help"></span>#i18n('dataset.info.target') &mdash; #i18n('field.mandatory')</p>
					<p class="help hidden-field-js help-js">#i18n('dataset.help.target')</p>
				</div>

				<div class="class-js form-stack ui-state-default" title="#i18n('class.help.target')">
					<label for="targetclass">#i18n('class.label')</label>
					<select id="targetclass" name="targetclass" tabindex="2">
						<option value="#i18n('field.none')" selected="selected" disabled="disabled"></option>
						#foreach( $class in $classes )
							<option value="$class">$class</option>
						#end
					</select>
					<p class="info"><span class="ui-icon ui-icon-help"></span>#i18n('class.info.target') &mdash; #i18n('field.optional')</p>
					<p class="help hidden-field-js help-js">#i18n('class.help.target')</p>
				</div>

				<div class="predicate-js form-stack ui-state-default ui-corner-bottom" title="#i18n('predicate.help.target')">
					<label for="targetpredicate">#i18n('predicate.label')</label>
					<select id="targetpredicate" name="targetpredicate" tabindex="3">
						<option value="#i18n('field.mandatory')" selected="selected" disabled="disabled"></option>
						#foreach( $predicate in $predicates )
							<option value="$predicate">$predicate</option>
						#end
					</select>
					<p class="info"><span class="ui-icon ui-icon-help"></span>#i18n('predicate.info.target') &mdash; #i18n('field.mandatory')</p>
					<p class="help hidden-field-js help-js">#i18n('predicate.help.target')</p>
				</div>
			</fieldset>

			
			<fieldset class="source-js field-stack ui-widget-content ui-corner-all">
				<legend>#i18n('reference.label')</legend>

				<div class="dataset-js form-stack ui-state-default ui-corner-top" title="#i18n('dataset.help.target')">
					<label for="sourcedataset">#i18n('dataset.label')</label>
					<select id="sourcedataset" name="sourcedataset" tabindex="4">
						<option value="#i18n('field.mandatory')" selected="selected" disabled="disabled"></option>
						#foreach( $source in $sources )
							<option value="$source">$source</option>
						#end
					</select>
					<p class="info"><span class="ui-icon ui-icon-help"></span>#i18n('dataset.info.source') &mdash; #i18n('field.mandatory')</p>
					<p class="help hidden-field-js help-js">#i18n('dataset.help.source')</p>
				</div>

				<div class="class-js form-stack ui-state-default" title="#i18n('class.help.source')">
					<label for="sourceclass">#i18n('class.label')</label>
					<select id="sourceclass" name="sourceclass" tabindex="5">
						<option value="#i18n('field.none')" selected="selected" disabled="disabled"></option>
						#foreach( $class in $classes )
							<option value="$class">$class</option>
						#end
					</select>
					<p class="info"><span class="ui-icon ui-icon-help"></span>#i18n('class.info.source') &mdash; #i18n('field.optional')</p>
					<p class="help hidden-field-js help-js">#i18n('class.help.source')</p>
				</div>

				<div class="predicate-js form-stack ui-state-default ui-corner-bottom" title="#i18n('predicate.help.source')">
					<label for="sourcepredicate">#i18n('predicate.label')</label>
					<select id="sourcepredicate" name="sourcepredicate" tabindex="6">
						<option value="#i18n('field.mandatory')" selected="selected" disabled="disabled"></option>
						#foreach( $predicate in $predicates )
							<option value="$predicate">$predicate</option>
						#end
					</select>					
					<p class="info"><span class="ui-icon ui-icon-help"></span>#i18n('predicate.info.source') &mdash; #i18n('field.mandatory')</p>
					<p class="help hidden-field-js help-js">#i18n('predicate.help.source')</p>
				</div>
			</fieldset>

			<div class="clearfix"></div>

			<div class="multiple-choices">
				<h5 class="info">#i18n('convert.title') :</h5>
				<input type="radio" id="convert-preview" name="update" value="preview" checked="checked" tabindex="10"/>
				<label for="convert-preview" title="#i18n('preview.title')">#i18n('preview.label')</label>
				<input type="radio" id="convert-overwrite" name="update" value="overwrite" tabindex="11"/>
				<label for="convert-overwrite" title="#i18n('overwrite.title')">#i18n('overwrite.label')</label>
				<input type="radio" id="convert-new" name="update" value="new" tabindex="12"/>
				<label for="convert-new" title="#i18n('new.title')">#i18n('new.label')</label>
			</div>

			<div class="multiple-choices">
				<input type="submit" id="convert-submit" value="#i18n('send.label')" tabindex="7"/>
				<input type="checkbox" id="convert-help" class="ui-priority-secondary" tabindex="8"/>
				<label for="convert-help" title="#i18n('help.title')">#i18n('help.label')</label>
				<a href="${baseUri}/project/${it.title}" id="convert-cancel"  class="ui-priority-secondary" title="#i18n('cancel.title') #i18n('project.workspace.link')" tabindex="9">#i18n('cancel.label')</a>
			</div>

			<!-- Optionaly displayed help content. -->
			<fieldset class="help-js hidden-field-js ui-widget-content ui-corner-all">
				<p class="description">#i18n('stringtouri.description')</p>
			</fieldset>

		</form>
	</div>
	#footer
	#script_links
	<script type="text/javascript">
		var none = "#i18n('field.none')";
		var confirmationMessage = "#i18n('update.confirm')";

		/*
		* Does nothing on the client-side to forbid the two datasets to be identical.
		* Does nothing to filter the possible values once choices are done.
		*/
		var datasets = [
			#foreach( $source in $sources )
			"$source",
			#end
		];

		var ourclasses = [
			#foreach( $class in $classes )
			"$class",
			#end
		];

		var theirclasses = [
			#foreach( $class in $classes )
			"$class",
			#end
		];

		var ourpredicates = [
			#foreach( $predicate in $predicates)
			"$predicate",
			#end
		];

		var theirpredicates = [
			#foreach( $predicate in $predicates )
			"$predicate",
			#end
		];

	</script>
	## Lien temporaire pour le d√©veloppement.
	<script type="text/javascript" src="http://localhost:1337/static/js/stringtouri-form.js"></script>
	## <script language="javascript" src="${moduleUri}/static/js/stringtouri-form.js"></script>
</body>
</html>
